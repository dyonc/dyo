"use strict";var a=n=>n;async function r(n={}){let t=location.href,e=document.referrer,o=a({type:"pageview",url:t});if(o===!1||o===null)return;o&&(t=o.url);let s=e.includes(location.host),f={o:t,ts:Date.now(),...n.withReferrer&&!s?{r:e}:{}};await fetch("/va/view",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})}var c=()=>{if(window.vai)return;window.vai=!0,d(),r({withReferrer:!0});let n=history.pushState;history.pushState=function(...t){let e=t[2],i=typeof e=="string"?location.pathname!=e.split("?")[0]:e&&location.href!==e.href;n.apply(history,t),i&&r()},window.addEventListener("popstate",function(){r()})},d=()=>{var n;window.va=function(t,e){t==="beforeSend"&&(a=e)},(n=window.vaq)==null||n.forEach(([t,e])=>{window.va(t,e)})};c();